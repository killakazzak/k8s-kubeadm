sudo apt-get update && sudo apt-get upgrade -y
sudo apt-get install wireguard
sudo nano /etc/sysctl.conf
net.ipv4.ip_forward=1
sudo sysctl -p
net.ipv4.ip_forward=1
sudo apt install ufw
sudo ufw allow ssh
sudo ufw allow 51820/udp
sudo ufw enable
sudo ufw status

Generating private and public keys

cd /etc/wireguard
umask 077
wg genkey | tee privatekey | wg pubkey > publickey

Generate server config
sudo nano /etc/wireguard/wg0.conf

```
[Interface]
PrivateKey = <contents-of-server-privatekey>
Address = 10.0.0.1/24
PostUp = iptables -A FORWARD -i wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
PostDown = iptables -D FORWARD -i wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE
ListenPort = 51820

[Peer]
PublicKey = <contents-of-client-publickey>
AllowedIPs = 10.0.0.2/32
```

ip route list default

sudo cat /etc/wireguard/publickey
sudo cat /etc/wireguard/privatekey

Starting WireGuard and enabling it at boot

wg-quick up wg0
